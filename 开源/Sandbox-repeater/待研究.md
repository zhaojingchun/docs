获取 listenerId ： 

com.alibaba.jvm.sandbox.core.manager.impl.SandboxClassFileTransformer#SandboxClassFileTransformer

java.lang.ref.WeakReference





// 全局处理器ID:处理器映射集合

com.alibaba.jvm.sandbox.core.enhance.weaver.EventListenerHandler#mappingOfEventProcessor



```java
            @GetMapping(value={"/fetchResourceInitPlan"})
            @ApiOperation(value="获取资源初始化进度")
            @ResponseBody
            public ResultModel fetchResourceInitPlan(Long solutionId) {
         ResultModel result = ResultModel.instance();
        Long bathchId = null;
                try {
                    ResourcePlanResultDTO resourcePlanResultDTO = new ResourcePlanResultDTO();
            ResourceInitBatch lastData = this.resouceInitBatchService.findLastData(solutionId);
             if (lastData != null) {
                        List tasks;
                resourcePlanResultDTO.setIsFinish(Boolean.valueOf(this.resouceInitBatchService.isSucess(lastData.getId())));
                resourcePlanResultDTO.setHasRunningData(Boolean.valueOf(this.resouceInitBatchService.hasRunningData(lastData.getId())));
                bathchId = lastData.getId();
               List resourceInitPlanDTOS = this.componentInitTaskService.fetchResourceInitPlan(bathchId);
                if (!CollectionUtils.isEmpty((Collection)resourceInitPlanDTOS)) {
                   resourcePlanResultDTO.setResourceInitPlans(resourceInitPlanDTOS);
                        }
               if (!CollectionUtils.isEmpty((Collection)(tasks = this.componentInitTaskService.findbyBatchId(lastData.getId())))) {
                    List<ComponentInitTask> componentInitTasks = tasks.stream().filter(data -> DataYnEnum.VALID.getCode().equals(data.getDisplay())).collect(Collectors.toList());
                    Map<Long, String> systemComponentMap = this.fetchCcvNameMap(componentInitTasks);
                            HashMap<Long, String> containerNameMap = new HashMap<Long, String>();
                     this.fetchContainerNameMap(componentInitTasks, containerNameMap);
                    List resultList = tasks.stream().map(componentInitTask -> {
                                ComponentInitTaskDTO componentInitTaskDTO = new ComponentInitTaskDTO();
                        BeanUtils.copyProperties((Object)componentInitTask, (Object)componentInitTaskDTO);
                         if (Objects.nonNull(componentInitTaskDTO.getContainerComponentValueId())) {
                             componentInitTaskDTO.setName((String)systemComponentMap.get(componentInitTaskDTO.getContainerComponentValueId()));
                                }
                         if (Objects.nonNull(componentInitTaskDTO.getContainerId())) {
                             componentInitTaskDTO.setName((String)containerNameMap.get(componentInitTaskDTO.getContainerId()));
                                }
                        return componentInitTaskDTO;
                            }).collect(Collectors.toList());
                     resourcePlanResultDTO.setComponentInitTaskList(resultList);
                        }
                    }
             result.setData((Object)resourcePlanResultDTO);
                }
                catch (SnServiceException e1) {
            log.error(" 获取批次下资源初始化进度失败 Exception  batchId  " + bathchId + " Exception " + e1.getMessage(), (Throwable)e1);
             result.setSnServiceExceptionFailure(e1);
                }
                catch (Throwable e) {
            log.error(" 获取批次下资源初始化进度失败 Throwable batchId  " + bathchId + " Throwable " + e.getMessage(), e);
             result.setFailure();
                }
         return result;
            }
```

