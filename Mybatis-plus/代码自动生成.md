## 代码自动生成



[TOC]

### maven依赖

```xml
<dependency>
  <groupId>com.baomidou</groupId>
  <artifactId>mybatis-plus-generator</artifactId>
  <version>3.4.0</version>
</dependency>
<dependency>
  <groupId>org.apache.velocity</groupId>
  <artifactId>velocity-engine-core</artifactId>
  <version>2.3</version>
</dependency>
```

### 代码

```java
package com.jd.solution.code;

import com.baomidou.mybatisplus.generator.AutoGenerator;
import com.baomidou.mybatisplus.generator.InjectionConfig;
import com.baomidou.mybatisplus.generator.config.*;
import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;
import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;
import lombok.Data;
import lombok.experimental.Accessors;

import java.util.HashMap;

/**
 * <p>
 * mysql 代码生成器演示例子
 * </p>
 *
 * @author jobob
 * @since 2018-09-12
 */
public class MysqlGenerator {

    @Data
    @Accessors(chain = true)
    static
    class param{
        String projectPath =  System.getProperty("user.dir");
        String parent ="com.jd.solution";
        String entity ="domain.entity";
        String serviceImpl = "service.impl";
        String service = "service";
        String mapper="dao.mapper";
        String moduleName="";

        String ENTITY_PATH = projectPath+"/solution-domain/src/main/java/com/jd/solution/domain/entity/";
        String SERVICE_PATH = projectPath+"/solution-service/src/main/java/com/jd/solution/service/";
        String SERVICE_IMPL_PATH = projectPath+"/solution-service/src/main/java/com/jd/solution/service/impl/";
        String MAPPER_PATH = projectPath+"/solution-dao/src/main/java/com/jd/solution/dao/mapper/";
        String XML_PATH = projectPath+"/solution-dao/src/main/resources/mapper/";
        String CONTROLLER_PATH = projectPath+"/solution-web/src/main/java/com/jd/solution/controller/";

        String [] include = new String [0] ;

        /**
         * 驱动连接的URL
         */
        private String url;
        /**
         * 驱动名称
         */
        private String driverName;
        /**
         * 数据库连接用户名
         */
        private String username;
        /**
         * 数据库连接密码
         */
        private String password;


    }

    /**
     * RUN THIS
     */
    public static void main(String[] args) {
        param param = new param()
                .setInclude(new String []{"sn_env_resource"})
                .setUrl("jdbc:mysql://10.170.174.253:3306/solution_platform_test?useUnicode=true&serverTimezone=GMT&useSSL=false&characterEncoding=utf8")
                .setDriverName("com.mysql.jdbc.Driver")
                .setUsername("root")
                .setPassword("cjgCJG__11");


        doCreate(param);
    }

    private static void doCreate(param param) {
        // 代码生成器
        AutoGenerator mpg = new AutoGenerator();

        // 全局配置
        GlobalConfig gc = new GlobalConfig();
        String projectPath = param.getProjectPath();
        gc.setOutputDir(projectPath);
        gc.setAuthor("sunchao81");
        gc.setOpen(false);
        gc.setSwagger2(true); //开启Swagger2模式
        mpg.setGlobalConfig(gc);

        // 数据源配置
        DataSourceConfig dsc = new DataSourceConfig();
        dsc.setUrl(param.getUrl());
        dsc.setDriverName(param.getDriverName());
        dsc.setUsername(param.getUsername());
        dsc.setPassword(param.getPassword());
        mpg.setDataSource(dsc);

        // 包配置
        PackageConfig pc = new PackageConfig();
        //设置个模块包名
        pc.setModuleName(param.getModuleName());
        pc.setParent(param.getParent());
        pc.setEntity(param.getEntity());
        pc.setServiceImpl(param.getServiceImpl());
        pc.setService(param.getService());
        pc.setMapper(param.getMapper());

        HashMap hashMap = new HashMap();
        //设置各层文件数据路径
        hashMap.put(ConstVal.SERVICE_PATH,param.getSERVICE_PATH());
        hashMap.put(ConstVal.CONTROLLER_PATH,param.getCONTROLLER_PATH());
        hashMap.put(ConstVal.SERVICE_IMPL_PATH,param.getSERVICE_IMPL_PATH());
        hashMap.put(ConstVal.ENTITY_PATH,param.getENTITY_PATH());
        hashMap.put(ConstVal.MAPPER_PATH,param.getMAPPER_PATH());
        hashMap.put(ConstVal.XML_PATH,param.getXML_PATH());

        pc.setPathInfo(hashMap);

        mpg.setPackageInfo(pc);

        // 自定义配置
        InjectionConfig cfg = new InjectionConfig() {
            @Override
            public void initMap() {
                // to do nothing
            }
        };

        // 策略配置
        StrategyConfig strategy = new StrategyConfig();
        strategy.setNaming(NamingStrategy.underline_to_camel);
        strategy.setColumnNaming(NamingStrategy.underline_to_camel);
        strategy.setEntityLombokModel(true);
        strategy.setInclude(param.include);
        strategy.setEntityTableFieldAnnotationEnable(true);
        strategy.setControllerMappingHyphenStyle(true);
        strategy.setChainModel(true);
        //表前缀
        strategy.setTablePrefix("sn_");
        mpg.setStrategy(strategy);
        // 选择 freemarker 引擎需要指定如下加，注意 pom 依赖必须有！
        mpg.setTemplateEngine(new FreemarkerTemplateEngine());
        mpg.execute();
    }

}
```

